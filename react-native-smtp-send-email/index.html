<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>React Native SMTP. Send Email in Background (Android Only) - Yet another software engineer</title><link rel=icon type=image/png href=icons/myicon.png><meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:title" content="React Native SMTP. Send Email in Background (Android Only)"><meta property="og:description" content="React native SMTP is a SMTP client for react-native. It can be used to send emails in the background using the SMTP protocol. This module only supports Android."><meta property="og:type" content="article"><meta property="og:url" content="http://anotherdev.xyz/react-native-smtp-send-email/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-30T09:31:32+00:00"><meta property="article:modified_time" content="2019-10-30T09:31:32+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="React Native SMTP. Send Email in Background (Android Only)"><meta name=twitter:description content="React native SMTP is a SMTP client for react-native. It can be used to send emails in the background using the SMTP protocol. This module only supports Android."><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=http://anotherdev.xyz/css/normalize.css><link rel=stylesheet type=text/css media=screen href=http://anotherdev.xyz/css/main.css><link rel=stylesheet type=text/css href=http://anotherdev.xyz/css/custom.css><link rel=stylesheet type=text/css href=http://anotherdev.xyz/css/dark.css media="(prefers-color-scheme: dark)"><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src=http://anotherdev.xyz/js/main.js></script><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-KX5L8P2")</script></head><body><div class="container wrapper post"><div class=header><base href=http://anotherdev.xyz/><h1 class=site-title><a href=http://anotherdev.xyz/>Yet another software engineer</a></h1><div class=site-description><h2>My thoughts are my own</h2><nav class="nav social"><ul class=flat><a href=https://github.com/shihabmridha title=Github><i data-feather=github></i></a><a href=https://twitter.com/shihabmridha title=Twitter><i data-feather=twitter></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=http://anotherdev.xyz/>Home</a></li><li><a href=http://anotherdev.xyz/posts>All notes</a></li><li><a href=http://anotherdev.xyz/about>About</a></li><li><a href=http://anotherdev.xyz/tags>Tags</a></li></ul></nav></div><div class=post-header><h1 class=title>React Native SMTP. Send Email in Background (Android Only)</h1><div class=meta>Posted at &mdash; Oct 30, 2019</div></div><div class=markdown><p>I am not a big fan of mobile application development. In fact, I don&rsquo;t feel comfortable with anything related to the user interface. It is not like I can not do, it is more like I am less experienced with it.</p><p>In my current project, I was writing some back-end stuff for our new IoT platform. Suddenly one of my team asked me to help him with his <a href=https://facebook.github.io/react-native/>react native</a> project. He had a deadline soon and a lot of work to do. He convinced me to work with him because he knew I had previous experience with the react library. Since react and react-native are similar, I decided to help him. FYI, the app was android only.</p><p>He was working on a task where he had to develop a <a href=https://facebook.github.io/react-native/docs/native-modules-android>native module</a> for the app. In case you didn&rsquo;t know, the native module is a way of using native code (Java for Android, Swift/Objective-c for iOS) or calling a native API from JavaScript. The was for a special kind of android device where he had to implement a scanner to scan something. But, the available scanner library is written in Java. There was no relative react-native module out there. So, he had to write his own Java wrapper for the Java library.</p><p>My task was to export those scanned data as CSV to the file system, upload it to an FTP server and send it via email as attachments. Exporting as CSV to the file system was fairly straight forward. No additional module was needed to perform this simple task. After that, I had to implement a feature which uploads file to the FTP server. So, I started looking for a react-native FTP client. Fortunately found one but with poor documentation. Still managed to make it work. Now, it is time to implement a send email feature. To achieve this I needed an SMTP client. Found one. I was happy since things are going well but not for long. The SMTP client couldn&rsquo;t establish a connection with the SMTP server. I tried many ways but failed. Installed another module. This time the app didn&rsquo;t even compile successfully.</p><p>I informed my partner. He said once he is done with his native module implementation, he will build the SMTP client as well. I was like okay, let me know when you are done.</p><p>Then I decided to give it a try. I had previous experience of working with Java. So, I tried to implement an SMTP client (native module) for our react native application. It took a whole day for me to make it work. But honestly, it was a journey worth taking.</p><p>I really love the idea of native module, bridging native code with javascript. Thanks react native team for developing such impressive technology.</p><p>I have made a separate NPM module for it and published it to NPM. Check out my first (<a href=https://www.npmjs.com/package/react-native-smtp>react-native-smtp</a>) NPM module.</p><p>If you are an iOS developer and wish to extend the module&rsquo;s support to iOS as well, you can create a pull request for it. I was surprised to see my module is getting downloaded. It feels great!</p><h3 id=usage>Usage</h3><p>To install the module open up your terminal and run <code>npm install --save react-native-smtp</code>.</p><p>Then you have to link the module with your project. To achieve this run the following command <code>react-native link react-native-smtp</code>.</p><p>Now, to send email use the following snippet.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>import</span> EmailSender from <span style=color:#2aa198>&#39;react-native-smtp&#39;</span>;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#586e75>// Configuration
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>EmailSender.config({
</span></span><span style=display:flex><span>  host<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;smtp.host.io&#39;</span>,
</span></span><span style=display:flex><span>  port<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;465&#39;</span>, <span style=color:#586e75>// Optional. Default to 465
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>  username<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;username&#39;</span>,
</span></span><span style=display:flex><span>  password<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;password&#39;</span>,
</span></span><span style=display:flex><span>  isAuth<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;true&#39;</span>, <span style=color:#586e75>// Optional. Default to `true`
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>  tls<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;true&#39;</span> <span style=color:#586e75>// Optional. Default to `true`
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>});
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#586e75>/*
</span></span></span><span style=display:flex><span><span style=color:#586e75> * Used react-native-fs module to get file path.
</span></span></span><span style=display:flex><span><span style=color:#586e75> * Keep this array empty if there is no attachment.
</span></span></span><span style=display:flex><span><span style=color:#586e75> */</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>const</span> attachments <span style=color:#719e07>=</span> [
</span></span><span style=display:flex><span>  RNFS.ExternalStorageDirectoryPath <span style=color:#719e07>+</span> <span style=color:#2aa198>&#39;/Tracklist/file.txt&#39;</span>,
</span></span><span style=display:flex><span>  RNFS.ExternalStorageDirectoryPath <span style=color:#719e07>+</span> <span style=color:#2aa198>&#39;/Tracklist/file_2.txt&#39;</span>,
</span></span><span style=display:flex><span>];
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#586e75>// Now send the mail
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>EmailSender.send(
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    from<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;from@email.com&#39;</span>,
</span></span><span style=display:flex><span>    to<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;to@email.com,another@email.com&#39;</span>,
</span></span><span style=display:flex><span>    subject<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;The subject&#39;</span>,
</span></span><span style=display:flex><span>    body<span style=color:#719e07>:</span> <span style=color:#2aa198>&#39;&lt;h3&gt; Cool Body &lt;/h3&gt;&#39;</span>;
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  attachments, <span style=color:#586e75>// This second parameter is mandatory. You can send an empty array.
</span></span></span><span style=display:flex><span><span style=color:#586e75></span>);
</span></span></code></pre></div><h3 id=conclusion>Conclusion</h3><p>This module doesn&rsquo;t handle every tidbits so if you are trying to do something advanced then you might get some error or you might not get the result you expected. But, for basic usage it should work fine.</p></div><div class=post-tags><nav class="nav tags"><ul class=flat><li><a href=http://anotherdev.xyz/tags/react-native>react native</a></li><li><a href=http://anotherdev.xyz/tags/java>java</a></li><li><a href=http://anotherdev.xyz/tags/javascript>javascript</a></li><li><a href=http://anotherdev.xyz/tags/smtp>smtp</a></li></ul></nav></div></div><div class="footer wrapper"><nav class=nav><div>© Another Dev | <a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>